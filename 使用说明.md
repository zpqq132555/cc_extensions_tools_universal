# Extensions Tools - Cocos Creator è·¨ç‰ˆæœ¬é€šç”¨æ’ä»¶

## ğŸ“– é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŒæ—¶å…¼å®¹ **Cocos Creator 2.x** å’Œ **3.x** ç‰ˆæœ¬çš„æ‰©å±•æ’ä»¶ï¼Œé‡‡ç”¨é€‚é…å™¨æ¨¡å¼å®ç°è·¨ç‰ˆæœ¬ API ç»Ÿä¸€ï¼Œè®©å¼€å‘è€…æ— éœ€å…³å¿ƒç‰ˆæœ¬å·®å¼‚å³å¯ç¼–å†™æ‰©å±•åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **è·¨ç‰ˆæœ¬å…¼å®¹**ï¼šè‡ªåŠ¨æ£€æµ‹ Cocos Creator ç‰ˆæœ¬ï¼Œä½¿ç”¨å¯¹åº”çš„ API
- âœ… **ç»Ÿä¸€æ¥å£**ï¼šæä¾›ä¸€è‡´çš„å¼€å‘ä½“éªŒï¼Œæ— éœ€ç¼–å†™ç‰ˆæœ¬åˆ¤æ–­ä»£ç 
- âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ ¸å¿ƒåŠŸèƒ½ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œæ˜“äºæ‰©å±•ç»´æŠ¤
- âœ… **TypeScript æ”¯æŒ**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œå¼€å‘æ›´å®‰å…¨é«˜æ•ˆ
- âœ… **Inspector æ‰©å±•**ï¼šæ”¯æŒåœ¨èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰å±æ€§é¢æ¿

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æ’ä»¶

å°†æ’ä»¶æ–‡ä»¶å¤¹å¤åˆ¶åˆ°é¡¹ç›®çš„ `packages` ç›®å½•ä¸‹ï¼š

```
your-project/
â””â”€â”€ packages/
    â””â”€â”€ extensions_tools_universal/
```

### 2. ç¼–è¯‘æ’ä»¶

åœ¨æ’ä»¶ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
npm install
npm run build
```

æˆ–åˆ†åˆ«ç¼–è¯‘ v2/v3 ç‰ˆæœ¬ï¼š

```bash
npm run build:v2  # ç¼–è¯‘ Cocos 2.x ç‰ˆæœ¬
npm run build:v3  # ç¼–è¯‘ Cocos 3.x ç‰ˆæœ¬
```

### 3. å¯ç”¨æ’ä»¶

**Cocos Creator 2.x:**
- é¡¶éƒ¨èœå•ï¼š`æ‰©å±• â†’ æ‰©å±•ç®¡ç†å™¨`
- æ‰¾åˆ° `extensions_tools` å¹¶å¯ç”¨

**Cocos Creator 3.x:**
- é¡¶éƒ¨èœå•ï¼š`æ‰©å±• â†’ Extension Manager`
- æ‰¾åˆ° `extensions_tools` å¹¶å¯ç”¨

### 4. é‡è½½æ’ä»¶ï¼ˆå¯é€‰ï¼‰

**Cocos Creator 2.x:**
- `å¼€å‘è€… â†’ é‡æ–°åŠ è½½æ’ä»¶`

**Cocos Creator 3.x:**
- `å¼€å‘è€… â†’ é‡æ–°åŠ è½½æ‰©å±•`

---

## ğŸ”§ åŠŸèƒ½è¯´æ˜

### 1. å·¥å…·é¢æ¿

#### æ‰“å¼€æ–¹å¼

**Cocos Creator 2.x:**
- èœå•ï¼š`æ‰©å±• â†’ Extensions Tools â†’ Open Panel`

**Cocos Creator 3.x:**
- èœå•ï¼š`é¢æ¿ â†’ Extensions Tools â†’ Open Panel`

#### é¢æ¿åŠŸèƒ½

- æ˜¾ç¤ºæ’ä»¶çŠ¶æ€å’Œè®¡æ•°å™¨
- æµ‹è¯•ä¸»è¿›ç¨‹ä¸é¢æ¿é€šä¿¡
- æŒ‰é’®äº¤äº’ç¤ºä¾‹

### 2. Bundle è·¯å¾„æ˜ å°„å·¥å…·

è‡ªåŠ¨æ‰«æé¡¹ç›®ä¸­çš„èµ„æº Bundleï¼Œç”Ÿæˆè·¯å¾„æ˜ å°„é…ç½®ã€‚

#### ä½¿ç”¨æ–¹å¼

**Cocos Creator 2.x:**
- èœå•ï¼š`æ‰©å±• â†’ Extensions Tools â†’ æ˜ å°„èµ„æºåç§°è·¯å¾„`

**Cocos Creator 3.x:**
- èœå•ï¼š`å·¥å…· â†’ Extensions Tools â†’ æ˜ å°„èµ„æºåç§°è·¯å¾„`

#### åŠŸèƒ½è¯´æ˜

- è‡ªåŠ¨æ‰«æ `assets` ç›®å½•ä¸‹çš„æ‰€æœ‰ Bundle
- ç”Ÿæˆèµ„æºè·¯å¾„æ˜ å°„å…³ç³»
- ä¾¿äºåœ¨ä»£ç ä¸­å¼•ç”¨èµ„æºè·¯å¾„

### 3. èµ„æºç›®å½•è¯´æ˜ï¼ˆInspector æ‰©å±•ï¼‰

åœ¨èµ„æºç®¡ç†å™¨ä¸­é€‰ä¸­æ–‡ä»¶å¤¹æ—¶ï¼Œå¯åœ¨å±æ€§æ£€æŸ¥å™¨ä¸­æ˜¾ç¤ºè¯¥æ–‡ä»¶å¤¹çš„è¯´æ˜æ–‡æ¡£ã€‚

#### ä½¿ç”¨æ–¹æ³•

1. **åˆ›å»ºè¯´æ˜æ–‡æ¡£**
   
   åœ¨ç›®æ ‡æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ªéšè—çš„ Markdown æ–‡ä»¶ï¼Œå‘½åè§„åˆ™ï¼š`.{æ–‡ä»¶å¤¹åç§°}.md`
   
   ä¾‹å¦‚ï¼Œå¯¹äºæ–‡ä»¶å¤¹ `assets/game/scripts`ï¼Œåˆ›å»ºæ–‡ä»¶ï¼š
   ```
   assets/game/scripts/.scripts.md
   ```

2. **ç¼–å†™æ–‡æ¡£å†…å®¹**
   
   åœ¨ `.scripts.md` ä¸­ç¼–å†™è¯´æ˜æ–‡å­—ï¼š
   ```markdown
   ## è„šæœ¬ç›®å½•
   
   å­˜æ”¾æ¸¸æˆæ ¸å¿ƒé€»è¾‘è„šæœ¬
   
   - GameManager.ts - æ¸¸æˆç®¡ç†å™¨
   - PlayerController.ts - ç©å®¶æ§åˆ¶å™¨
   - EnemyAI.ts - æ•Œäºº AI
   ```

3. **æŸ¥çœ‹è¯´æ˜**
   
   åœ¨èµ„æºç®¡ç†å™¨ä¸­ç‚¹å‡»é€‰ä¸­è¯¥æ–‡ä»¶å¤¹ï¼Œå³ä¾§å±æ€§æ£€æŸ¥å™¨ä¼šæ˜¾ç¤ºï¼š
   ```
   ğŸ“ èµ„æºç›®å½•è¯´æ˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ## è„šæœ¬ç›®å½•          â”‚
   â”‚                      â”‚
   â”‚ å­˜æ”¾æ¸¸æˆæ ¸å¿ƒé€»è¾‘... â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

#### æ˜¾ç¤ºä½ç½®

- **Cocos Creator 2.x**: é€‰ä¸­æ–‡ä»¶å¤¹åï¼Œåœ¨å³ä¾§ `å±æ€§æ£€æŸ¥å™¨ï¼ˆPropertiesï¼‰` é¢æ¿æ˜¾ç¤º
- **Cocos Creator 3.x**: é€‰ä¸­æ–‡ä»¶å¤¹åï¼Œåœ¨å³ä¾§ `æ£€æŸ¥å™¨ï¼ˆInspectorï¼‰` é¢æ¿æ˜¾ç¤º

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
extensions_tools_universal/
â”œâ”€â”€ package.json              # ä¸»é…ç½®æ–‡ä»¶ï¼ˆv2 æ ¼å¼ï¼‰
â”œâ”€â”€ package.v2.json           # Cocos 2.x ä¸“ç”¨é…ç½®
â”œâ”€â”€ package.v3.json           # Cocos 3.x ä¸“ç”¨é…ç½®ï¼ˆå« asset-db.mountï¼‰
â”œâ”€â”€ tsconfig.json             # TypeScript åŸºç¡€é…ç½®
â”œâ”€â”€ tsconfig.v2.json          # v2 ç¼–è¯‘é…ç½®
â”œâ”€â”€ tsconfig.v3.json          # v3 ç¼–è¯‘é…ç½®
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜ï¼ˆç®€è¦ï¼‰
â”œâ”€â”€ ä½¿ç”¨è¯´æ˜.md              # æœ¬æ–‡æ¡£ï¼ˆè¯¦ç»†ï¼‰
â”‚
â”œâ”€â”€ assets/                   # æ¸¸æˆè¿è¡Œæ—¶å·¥å…·ç±»ï¼ˆV3 è‡ªåŠ¨æŒ‚è½½ï¼ŒV2 åŒå‘åŒæ­¥ï¼‰
â”‚   â”œâ”€â”€ log/                  # æ—¥å¿—ç®¡ç†æ¨¡å—
â”‚   â”‚   â””â”€â”€ LogManager.ts     # æ—¥å¿—ç®¡ç†å™¨
â”‚   â””â”€â”€ utils/                # é€šç”¨å·¥å…·
â”‚       â”œâ”€â”€ ArrayUtil.ts      # æ•°ç»„å·¥å…·
â”‚       â”œâ”€â”€ DateUtil.ts       # æ—¥æœŸå·¥å…·
â”‚       â”œâ”€â”€ MathUtil.ts       # æ•°å­¦å·¥å…·
â”‚       â””â”€â”€ ObjectUtil.ts     # å¯¹è±¡å·¥å…·
â”‚
â”œâ”€â”€ src/                      # ç¼–è¾‘å™¨æ’ä»¶æºä»£ç 
â”‚   â”œâ”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ main.ts               # æ’ä»¶ä¸»å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ interfaces.ts     # è·¨ç‰ˆæœ¬æŠ½è±¡æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ version-detector.ts # ç‰ˆæœ¬æ£€æµ‹å™¨
â”‚   â”‚   â”œâ”€â”€ factory.ts        # é€‚é…å™¨å·¥å‚
â”‚   â”‚   â””â”€â”€ base-plugin.ts    # åŸºç¡€æ’ä»¶ç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ adapters/             # ç‰ˆæœ¬é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ v2/               # Cocos 2.x é€‚é…å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ editor-adapter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ panel-adapter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ipc-adapter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ asset-adapter.ts
â”‚   â”‚   â”‚   â””â”€â”€ scene-adapter.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ v3/               # Cocos 3.x é€‚é…å™¨
â”‚   â”‚       â”œâ”€â”€ editor-adapter.ts
â”‚   â”‚       â”œâ”€â”€ panel-adapter.ts
â”‚   â”‚       â”œâ”€â”€ ipc-adapter.ts
â”‚   â”‚       â”œâ”€â”€ asset-adapter.ts
â”‚   â”‚       â””â”€â”€ scene-adapter.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                # ç¼–è¾‘å™¨å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ Tools.ts          # æ–‡ä»¶æ“ä½œã€åŒå‘åŒæ­¥ç­‰
â”‚   â”‚
â”‚   â”œâ”€â”€ business/             # ä¸šåŠ¡åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ BundlePath.ts     # Bundle è·¯å¾„æ˜ å°„å·¥å…·
â”‚   â”‚   â””â”€â”€ my-panel.ts       # é¢æ¿å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ asset_directory/      # Inspector æ‰©å±•
â”‚   â”‚   â”œâ”€â”€ index.ts          # v3 ç‰ˆæœ¬å®ç°
â”‚   â”‚   â””â”€â”€ index.v2.ts       # v2 ç‰ˆæœ¬å®ç°
â”‚   â”‚
â”‚   â””â”€â”€ panels/               # é¢æ¿å®šä¹‰
â”‚       â””â”€â”€ default/
â”‚           â””â”€â”€ index.ts      # é»˜è®¤é¢æ¿
â”‚
â”œâ”€â”€ dist/                     # ç¼–è¯‘è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ v2/                   # v2 ç¼–è¯‘äº§ç‰©
â”‚   â””â”€â”€ v3/                   # v3 ç¼–è¯‘äº§ç‰©
â”‚
â”œâ”€â”€ i18n/                     # å›½é™…åŒ–
â”‚   â”œâ”€â”€ zh.js                 # ä¸­æ–‡
â”‚   â””â”€â”€ en.js                 # è‹±æ–‡
â”‚
â””â”€â”€ scripts/                  # æ„å»ºè„šæœ¬
    â””â”€â”€ install.js            # å®‰è£…è„šæœ¬

```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ ¸å¿ƒè®¾è®¡æ¨¡å¼

#### 1. æŠ½è±¡æ¥å£å±‚ï¼ˆinterfaces.tsï¼‰

å®šä¹‰æ‰€æœ‰è·¨ç‰ˆæœ¬é€šç”¨çš„æ¥å£ï¼Œå±è”½ç‰ˆæœ¬å·®å¼‚ï¼š

```typescript
export interface IEditorAdapter {
    getVersion(): string;
    log(message: string, ...args: any[]): void;
    getProjectPath(): string;
}

export interface IPanelAdapter {
    open(panelName: string): void;
    close(panelName: string): void;
}

export interface IIPCAdapter {
    sendToMain(channel: string, ...args: any[]): void;
    sendToPanel(panelName: string, channel: string, ...args: any[]): void;
}
```

#### 2. ç‰ˆæœ¬æ£€æµ‹ï¼ˆversion-detector.tsï¼‰

è‡ªåŠ¨æ£€æµ‹å½“å‰è¿è¡Œçš„ Cocos Creator ç‰ˆæœ¬ï¼š

```typescript
export class VersionDetector {
    static detect(): CocosVersion {
        // è‡ªåŠ¨æ£€æµ‹é€»è¾‘
    }
    
    static isV2(): boolean { /* ... */ }
    static isV3(): boolean { /* ... */ }
}
```

#### 3. é€‚é…å™¨å·¥å‚ï¼ˆfactory.tsï¼‰

æ ¹æ®ç‰ˆæœ¬åŠ¨æ€åˆ›å»ºå¯¹åº”çš„é€‚é…å™¨å®ä¾‹ï¼š

```typescript
export class AdapterFactory {
    static getInstance(): IAdapterManager {
        const version = VersionDetector.detect();
        // è¿”å›å¯¹åº”ç‰ˆæœ¬çš„é€‚é…å™¨
    }
}
```

#### 4. åŸºç¡€æ’ä»¶ç±»ï¼ˆbase-plugin.tsï¼‰

æä¾›ç»Ÿä¸€çš„æ’ä»¶å¼€å‘åŸºç±»ï¼š

```typescript
export abstract class BasePlugin {
    protected get editor(): IEditorAdapter { /* ... */ }
    protected get panel(): IPanelAdapter { /* ... */ }
    protected get ipc(): IIPCAdapter { /* ... */ }
    
    abstract load(): void;
    abstract unload(): void;
}
```

### æ·»åŠ æ–°åŠŸèƒ½

#### 1. åˆ›å»ºä¸šåŠ¡æ¨¡å—

åœ¨ `src/business/` ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼š

```typescript
// src/business/MyFeature.ts
import { getEditor, getPanel } from '../index';

export class MyFeature {
    static run() {
        const editor = getEditor();
        editor.log('My feature is running!');
        
        // ä½¿ç”¨ç»Ÿä¸€æ¥å£ï¼Œæ— éœ€å…³å¿ƒç‰ˆæœ¬
        const panel = getPanel();
        panel.open('my-panel');
    }
}
```

#### 2. åœ¨ä¸»æ’ä»¶ä¸­æ³¨å†Œ

åœ¨ `src/main.ts` ä¸­æ·»åŠ æ¶ˆæ¯å¤„ç†ï¼š

```typescript
class ExtensionsToolsPlugin extends BasePlugin {
    messages = {
        'my-feature': () => this.handleMyFeature(),
    };
    
    methods = {
        myFeature: () => this.handleMyFeature(),
    };
    
    private handleMyFeature() {
        MyFeature.run();
    }
}
```

#### 3. é…ç½®èœå•é¡¹

**package.json (v2):**
```json
{
    "main-menu": {
        "i18n:MAIN_MENU.package.title/extensions_tools/my-feature": {
            "message": "extensions_tools:my-feature"
        }
    }
}
```

**package.v3.json (v3):**
```json
{
    "contributions": {
        "menu": [{
            "path": "i18n:menu.develop/My Feature",
            "message": "myFeature"
        }],
        "messages": {
            "myFeature": {
                "methods": ["myFeature"]
            }
        }
    }
}
```

### åˆ›å»ºè‡ªå®šä¹‰é¢æ¿

å‚è€ƒ `src/business/my-panel.ts` å’Œ `src/panels/default/index.ts` çš„å®ç°æ–¹å¼ã€‚

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šè·å–ç¼–è¾‘å™¨ä¿¡æ¯

```typescript
import { getEditor, isV2, isV3 } from './index';

const editor = getEditor();
console.log('ç‰ˆæœ¬:', editor.getVersion());
console.log('é¡¹ç›®è·¯å¾„:', editor.getProjectPath());
console.log('æ˜¯å¦ v2:', isV2());
console.log('æ˜¯å¦ v3:', isV3());
```

### ç¤ºä¾‹ 2ï¼šæ‰“å¼€é¢æ¿

```typescript
import { getPanel } from './index';

const panel = getPanel();
panel.open('extensions_tools');
```

### ç¤ºä¾‹ 3ï¼šå‘é€æ¶ˆæ¯

```typescript
import { getIPC } from './index';

const ipc = getIPC();
ipc.sendToPanel('extensions_tools', 'hello', { data: 'test' });
ipc.broadcast('global-event', { message: 'hello world' });
```

### ç¤ºä¾‹ 4ï¼šæ“ä½œèµ„æº

```typescript
import { getAsset } from './index';

const asset = getAsset();
const uuid = asset.urlToUuid('db://assets/scripts/Main.ts');
console.log('èµ„æº UUID:', uuid);
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### package.json é…ç½®é¡¹

| å­—æ®µ | v2 | v3 | è¯´æ˜ |
|------|----|----|------|
| ä¸»å…¥å£ | `main` | `main` | æ’ä»¶ä¸»æ–‡ä»¶è·¯å¾„ |
| èœå• | `main-menu` | `contributions.menu` | é¡¶éƒ¨èœå•é…ç½® |
| é¢æ¿ | `panel` | `panels` | é¢æ¿é…ç½® |
| æ¶ˆæ¯ | - | `contributions.messages` | æ¶ˆæ¯æ˜ å°„ |
| Inspector | `inspector` | `inspector` | æ£€æŸ¥å™¨æ‰©å±• |

### TypeScript é…ç½®

- `tsconfig.json` - åŸºç¡€é…ç½®
- `tsconfig.v2.json` - v2 ç¼–è¯‘é…ç½®ï¼ˆè¾“å‡ºåˆ° `dist/v2`ï¼‰
- `tsconfig.v3.json` - v3 ç¼–è¯‘é…ç½®ï¼ˆè¾“å‡ºåˆ° `dist/v3`ï¼‰

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ’ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥æ’ä»¶æ˜¯å¦å·²å¯ç”¨
2. å°è¯•é‡æ–°åŠ è½½æ’ä»¶/æ‰©å±•
3. æ£€æŸ¥æ˜¯å¦å·²æ‰§è¡Œç¼–è¯‘å‘½ä»¤
4. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### Q2: Inspector æ²¡æœ‰æ˜¾ç¤ºï¼Ÿ

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®è®¤å·²é€‰ä¸­**æ–‡ä»¶å¤¹**ï¼ˆä¸æ˜¯æ–‡ä»¶ï¼‰
2. æ£€æŸ¥æ–‡ä»¶å¤¹å†…æ˜¯å¦æœ‰æ­£ç¡®å‘½åçš„ `.{æ–‡ä»¶å¤¹å}.md` æ–‡ä»¶
3. é‡æ–°ç¼–è¯‘æ’ä»¶
4. é‡å¯ Cocos Creator

### Q3: è·¨ç‰ˆæœ¬å¼€å‘æ³¨æ„äº‹é¡¹ï¼Ÿ

**å»ºè®®ï¼š**
- å§‹ç»ˆä½¿ç”¨é€‚é…å™¨æä¾›çš„æ¥å£ï¼Œä¸è¦ç›´æ¥è°ƒç”¨ `Editor` å¯¹è±¡
- é¢æ¿å¼€å‘æ—¶æ³¨æ„ v2 å’Œ v3 çš„ DOM API å·®å¼‚
- æµ‹è¯•æ—¶åœ¨ä¸¤ä¸ªç‰ˆæœ¬ä¸­éƒ½éªŒè¯åŠŸèƒ½

### Q4: å¦‚ä½•è°ƒè¯•ï¼Ÿ

**Cocos Creator 2.x:**
- `å¼€å‘è€… â†’ å¼€å‘è€…å·¥å…·` æ‰“å¼€æ§åˆ¶å°

**Cocos Creator 3.x:**
- `å¼€å‘è€… â†’ å¼€å‘è€…å·¥å…·` æ‰“å¼€æ§åˆ¶å°

åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š
```typescript
this.editor.log('è°ƒè¯•ä¿¡æ¯');
console.log('æ›´å¤šè°ƒè¯•ä¿¡æ¯');
```

---

## ğŸ§° è¿è¡Œæ—¶å·¥å…·ç±»

æœ¬æ’ä»¶æä¾›äº†ä¸€å¥—æ¸¸æˆè¿è¡Œæ—¶ä½¿ç”¨çš„å·¥å…·ç±»ï¼Œä½äº `assets/` ç›®å½•ï¼Œä¼šè‡ªåŠ¨åŒæ­¥åˆ°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚

- **Cocos Creator 3.x**: é€šè¿‡ `package.v3.json` çš„ `asset-db.mount` é…ç½®è‡ªåŠ¨æŒ‚è½½
- **Cocos Creator 2.x**: æ’ä»¶åŠ è½½æ—¶åŒå‘åŒæ­¥åˆ° `extensionScripts/` ç›®å½•

### ğŸ“‹ å·¥å…·ç±»æ¦‚è§ˆ

| å·¥å…·ç±» | æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|--------|----------|------|
| LogManager | `log/LogManager.ts` | æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒç­‰çº§ã€ç±»å‹åˆ†ç±»ã€å¼€å…³æ§åˆ¶ |
| ArrayUtil | `utils/ArrayUtil.ts` | æ•°ç»„å·¥å…·ï¼Œå…‹éš†ã€æ´—ç‰Œã€æ·±æ‹·è´ç­‰ |
| DateUtil | `utils/DateUtil.ts` | æ—¥æœŸå·¥å…·ï¼Œæ¯”è¾ƒã€æ ¼å¼åŒ–ç­‰ |
| MathUtil | `utils/MathUtil.ts` | æ•°å­¦å·¥å…·ï¼Œéšæœºæ•°ã€è·ç¦»è®¡ç®—ç­‰ |
| ObjectUtil | `utils/ObjectUtil.ts` | å¯¹è±¡å·¥å…·ï¼Œç±»å‹è¯†åˆ«ç­‰ |

### ğŸ“Š LogManager æ—¥å¿—ç®¡ç†å™¨

åŠŸèƒ½å®Œå–„çš„æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ—¥å¿—ç­‰çº§ã€ç±»å‹åˆ†ç±»å’Œå¼€å…³æ§åˆ¶ã€‚

#### æ—¥å¿—ç­‰çº§

| ç­‰çº§ | å€¼ | è¯´æ˜ |
|------|-----|------|
| OFF | 0 | å…³é—­æ‰€æœ‰æ—¥å¿— |
| FATAL | 1 | è‡´å‘½é”™è¯¯ |
| ERROR | 2 | é”™è¯¯ |
| WARN | 3 | è­¦å‘Š |
| INFO | 4 | ä¿¡æ¯ |
| DEBUG | 5 | è°ƒè¯• |
| TRACE | 6 | è·Ÿè¸ª |
| ALL | 7 | æ‰€æœ‰æ—¥å¿— |

#### æ—¥å¿—ç±»å‹

| ç±»å‹ | è¯´æ˜ |
|------|------|
| DEFAULT | é»˜è®¤æ—¥å¿— |
| NET | ç½‘ç»œæ—¥å¿— |
| UI | ç•Œé¢æ—¥å¿— |
| GAME | æ¸¸æˆé€»è¾‘æ—¥å¿— |
| RES | èµ„æºæ—¥å¿— |
| AUDIO | éŸ³é¢‘æ—¥å¿— |
| STORAGE | å­˜å‚¨æ—¥å¿— |
| PLATFORM | å¹³å°æ—¥å¿— |
| EVENT | äº‹ä»¶æ—¥å¿— |
| PERFORMANCE | æ€§èƒ½æ—¥å¿— |

#### åŸºç¡€ä½¿ç”¨

```typescript
import { Logger, LogLevel, LogType } from "./extensionScripts/log/LogManager";

// åŸºç¡€æ—¥å¿—è¾“å‡º
Logger.info("æ¸¸æˆåˆå§‹åŒ–å®Œæˆ");
Logger.debug("è°ƒè¯•ä¿¡æ¯", { data: 123 });
Logger.warn("è­¦å‘Šæ¶ˆæ¯");
Logger.error("é”™è¯¯ä¿¡æ¯", new Error("something wrong"));
Logger.fatal("è‡´å‘½é”™è¯¯ï¼");
Logger.trace("è·Ÿè¸ªæ—¥å¿—");
```

#### é…ç½®ç®¡ç†

```typescript
// å…¨å±€å¼€å…³
Logger.setEnabled(true);              // å¯ç”¨æ—¥å¿—
Logger.setEnabled(false);             // ç¦ç”¨æ—¥å¿—

// è®¾ç½®ç­‰çº§
Logger.setLevel(LogLevel.WARN);       // åªæ˜¾ç¤º WARN åŠä»¥ä¸Šçº§åˆ«

// ç±»å‹å¼€å…³
Logger.setTypeEnabled(LogType.NET, false);   // ç¦ç”¨ç½‘ç»œæ—¥å¿—
Logger.setTypeEnabled(LogType.UI, true);     // å¯ç”¨ UI æ—¥å¿—
```

#### åˆ†ç±»æ—¥å¿—å™¨

```typescript
import { 
    NetLogger, 
    UILogger, 
    GameLogger, 
    ResLogger,
    createLogger 
} from "./extensionScripts/log/LogManager";

// ä½¿ç”¨é¢„å®šä¹‰æ—¥å¿—å™¨
NetLogger.info("ç½‘ç»œè¿æ¥æˆåŠŸ");
UILogger.debug("ç•Œé¢åˆ·æ–°");
GameLogger.warn("æ¸¸æˆçŠ¶æ€å¼‚å¸¸");
ResLogger.error("èµ„æºåŠ è½½å¤±è´¥");

// åˆ›å»ºè‡ªå®šä¹‰æ—¥å¿—å™¨
const MyLogger = createLogger(LogType.GAME);
MyLogger.info("è‡ªå®šä¹‰æ¸¸æˆæ—¥å¿—");
```

#### æ—¥å¿—ç›‘å¬

```typescript
// æ·»åŠ ç›‘å¬å™¨
Logger.addListener((type, level, args) => {
    // å¯ç”¨äºä¸Šä¼ æ—¥å¿—åˆ°æœåŠ¡å™¨ã€å†™å…¥æ–‡ä»¶ç­‰
    console.log(`[${type}][${level}]`, ...args);
});

// æ¸…é™¤æ‰€æœ‰ç›‘å¬å™¨
Logger.clearListeners();
```

#### æ—¥å¿—å†å²

```typescript
// å¯ç”¨å†å²è®°å½•
Logger.enableHistory(100);  // æœ€å¤šä¿å­˜ 100 æ¡

// è·å–å†å²
const history = Logger.getHistory();

// æŒ‰ç±»å‹è¿‡æ»¤
const netLogs = Logger.getHistoryByType(LogType.NET);

// æŒ‰çº§åˆ«è¿‡æ»¤
const errorLogs = Logger.getHistoryByLevel(LogLevel.ERROR);

// æ¸…é™¤å†å²
Logger.clearHistory();
```

### ğŸ“¦ ArrayUtil æ•°ç»„å·¥å…·

```typescript
import { ArrayUtil } from "./extensionScripts/utils/ArrayUtil";

// å…‹éš†æ•°ç»„
const cloned = ArrayUtil.Clone([1, 2, 3]);

// æ´—ç‰Œï¼ˆFisher-Yates ç®—æ³•ï¼‰
const shuffled = ArrayUtil.Shuffle([1, 2, 3, 4, 5]);

// æ·±æ‹·è´å¯¹è±¡æˆ–æ•°ç»„
const copied = ArrayUtil.DeepClone(complexObject);
```

### ğŸ“… DateUtil æ—¥æœŸå·¥å…·

```typescript
import { DateUtil } from "./extensionScripts/utils/DateUtil";

// æ¯”è¾ƒä¸¤ä¸ªæ—¶é—´æ˜¯å¦ä¸ºåŒä¸€å¤©
const isSameDay = DateUtil.Compare(date1, date2);

// æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´ï¼ˆæ”¯æŒåç§»å¤©æ•°ï¼‰
const formatted = DateUtil.TimeFormat(0);  // å½“å‰æ—¶é—´
const tomorrow = DateUtil.TimeFormat(1);   // æ˜å¤©
```

### ğŸ”¢ MathUtil æ•°å­¦å·¥å…·

```typescript
import { MathUtil } from "./extensionScripts/utils/MathUtil";

// åŒºé—´éšæœºæ•´æ•°
const random = MathUtil.RandomRangeInt(1, 100);

// ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
const randomStr = MathUtil.RandomString(8);

// è®¡ç®—ä¸¤ç‚¹è·ç¦»
const distance = MathUtil.GetDistance({ x: 0, y: 0 }, { x: 100, y: 100 });
```

### ğŸ” ObjectUtil å¯¹è±¡å·¥å…·

```typescript
import { ObjectUtil } from "./extensionScripts/utils/ObjectUtil";

// è¯†åˆ«å¯¹è±¡ç±»å‹
const type = ObjectUtil.IdentifyType(someValue);
// è¿”å›: "null" | "undefined" | "string" | "number" | "boolean" 
//       | "array" | "Date" | "RegExp" | "function" | "object"
```

---

## ğŸ”¨ ç¼–è¾‘å™¨å·¥å…·ç±» (Tools)

æœ¬æ’ä»¶æä¾›äº†ä¸€å¥—ç¼–è¾‘å™¨ä¸“ç”¨çš„å·¥å…·ç±»ï¼Œä½äº `src/tools/Tools.ts`ï¼ŒåŒ…å«æ–‡ä»¶æ“ä½œã€ç›®å½•åŒæ­¥ç­‰åŠŸèƒ½ã€‚

> **æ³¨æ„**ï¼šæ­¤å·¥å…·ç±»ä»…åœ¨ç¼–è¾‘å™¨ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä¸ä¼šåŒæ­¥åˆ°é¡¹ç›®ä¸­ã€‚

### å·¥å…·æ–¹æ³•æ¦‚è§ˆ

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `CopyFileSync` | åŒæ­¥å¤åˆ¶æ–‡ä»¶ |
| `CopyDirSync` | åŒæ­¥å¤åˆ¶ç›®å½• |
| `WriteFileSync` | åŒæ­¥å†™å…¥æ–‡ä»¶ |
| `ReadDir` | éå†ç›®å½• |
| `GetDirectoryModifyTime` | è·å–ç›®å½•æœ€æ–°ä¿®æ”¹æ—¶é—´ |
| `DeleteFilesByPattern` | æŒ‰æ¨¡å¼åˆ é™¤æ–‡ä»¶ |
| `BidirectionalSync` | åŒå‘ç›®å½•åŒæ­¥ |

### åŒå‘åŒæ­¥ä½¿ç”¨

```typescript
import { Tools, IBidirectionalSyncOptions } from '../tools/Tools';

const result = Tools.BidirectionalSync(dirA, dirB, {
    ignorePatterns: ['.meta', '.git'],  // è®¡ç®—æ—¶é—´æ—¶å¿½ç•¥çš„æ–‡ä»¶
    deletePatterns: ['.meta'],          // åŒæ­¥ååˆ é™¤çš„æ–‡ä»¶
    preferDir: 'auto',                  // 'auto' | 'A' | 'B'
    onLog: console.log,
    onWarn: console.warn,
    onError: console.error
});

if (result.synced) {
    console.log(`åŒæ­¥æ–¹å‘: ${result.direction}`);
    console.log(`æº: ${result.sourceDir}`);
    console.log(`ç›®æ ‡: ${result.targetDir}`);
}
```

---

## ğŸ“š API å‚è€ƒ

### BasePlugin åŸºç±»

| æ–¹æ³•/å±æ€§ | è¯´æ˜ |
|----------|------|
| `load()` | æ’ä»¶åŠ è½½æ—¶è°ƒç”¨ï¼ˆéœ€é‡å†™ï¼‰ |
| `unload()` | æ’ä»¶å¸è½½æ—¶è°ƒç”¨ï¼ˆéœ€é‡å†™ï¼‰ |
| `editor` | ç¼–è¾‘å™¨é€‚é…å™¨ |
| `panel` | é¢æ¿é€‚é…å™¨ |
| `ipc` | è¿›ç¨‹é€šä¿¡é€‚é…å™¨ |
| `asset` | èµ„æºé€‚é…å™¨ |
| `scene` | åœºæ™¯é€‚é…å™¨ |
| `log()` | è¾“å‡ºæ—¥å¿— |
| `warn()` | è¾“å‡ºè­¦å‘Š |
| `error()` | è¾“å‡ºé”™è¯¯ |
| `openPanel()` | æ‰“å¼€é¢æ¿ |
| `closePanel()` | å…³é—­é¢æ¿ |

### å·¥å‚å‡½æ•°

```typescript
// è·å–é€‚é…å™¨å®ä¾‹
getEditor(): IEditorAdapter
getPanel(): IPanelAdapter
getIPC(): IIPCAdapter
getAsset(): IAssetAdapter
getScene(): ISceneAdapter

// ç‰ˆæœ¬æ£€æµ‹
isV2(): boolean
isV3(): boolean
detectVersion(): CocosVersion
```

---

## ğŸ“ ç‰ˆæœ¬å†å²

### v1.1.0 (2026-01-27)

- âœ… æ–°å¢æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼ˆLogManagerï¼‰
- âœ… æ–°å¢é€šç”¨å·¥å…·ç±»ï¼ˆToolsï¼‰
- âœ… æ–°å¢åŒå‘åŒæ­¥åŠŸèƒ½ï¼ˆBidirectionalSyncï¼‰
- âœ… å®Œå–„æ–‡æ¡£è¯´æ˜

### v1.0.0 (2026-01-21)

- âœ… å®ç°è·¨ç‰ˆæœ¬é€‚é…å™¨æ¡†æ¶
- âœ… æ·»åŠ  Bundle è·¯å¾„æ˜ å°„å·¥å…·
- âœ… å®ç°èµ„æºç›®å½•è¯´æ˜ Inspector
- âœ… æ”¯æŒ Cocos Creator 2.x å’Œ 3.x

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“® è”ç³»æ–¹å¼

- ä½œè€…ï¼šoldP
- é¡¹ç›®ï¼šExtensions Tools Universal
- é‚®ç®±ï¼š306964942@qq.com

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ Cocos Creator ç¤¾åŒºçš„æ”¯æŒï¼
